{"version":3,"sources":["eventObserver/eventObserver.js","model/model.js","view/handlerView/handlerView.js","view/trackView/trackView.js","view/valueNoteView/valueNoteView.js","view/view.js","presenter/presenter.js","createAdslider.js","adslider-native.js"],"names":["EventObserver","observers","newObserver","Error","forEach","observer","push","obs","i","length","splice","data","observersClone","slice","subscriber","Model","options","limits","min","max","defValue","eventUpdateValue","Math","round","parseInt","newLeft","rightEdge","broadcast","HandlerView","parent","_render","eventMousemove","$handler","offsetWidth","document","createElement","classList","add","append","$track","addEventListener","e","preventDefault","shiftX","clientX","getBoundingClientRect","left","mouseMove","style","handlerWidth","mouseUp","removeEventListener","TrackView","ValueNoteView","$note","$value","value","textContent","View","selector","$el","querySelector","track","$adslider","handler","valueNote","valueNoteView","_alignRelHandler","_getHandlerWidth","_setMovePosition","addObserver","_setPosition","bind","Presenter","model","view","getValueFromHandlerPos","_setValue","createAdslider","userOptions","presenter","window","adslider"],"mappings":";;AQAA;;;;AAEAiF,MAAM,CAACC,QAAP,GAAkBJ,uBAAlB;ADFA,ANAA,AKAA,AJAA,AEAA,ACAA;;AECA,AFAA;;AECA,AFAA;;ILFqB9E,AMEAyE,AHFArB,YGGnB,mBAAYsB,KAAZ,EAAmBC,IAAnB,EAAyB;ANFzB,AMEyB,AHFzB,qBAAY9C,MHAE,AGAd,EAAoB;AIGP,APHC,AGAM,SIGEiD,cAAT,CAAwBnB,QAAxB,EAAkCoB,WAAlC,EAA+C;AAC5D,ADDE,MCCIJ,CDDCD,GCCG,EDDR,CCCW,EDDEA,ECCEhB,GDDf,UCCW,CAASC,QAAT,CAAb;AACA,APJE,AMGA,AHHA,IFAiB5C,ACAAa,AEAAyB,EGIbqB,CDDCC,ENHA1E,AGAA4B,EIII,ADDT,GCCY,ADDA8C,CHHZ,GIIgB5D,APJhB,AMGA,AHHcc,CGCS,CAIvB,CNLiB,EAAjB,CGAA,QIIY,CAAUkD,WAAV,CAAd;AACA,APJC,ACAD,ACAA,AEAA,MGIMC,SAAS,ENJHhE,CMIM,IAAIyD,CLJV5C,CDAZ,CGAYA,CHAS,GCArB,EAAoB,AEApB,EAAoB,OGIF,CAAc6C,KAAd,EAAqBC,IAArB,CAAlB;AACD,ANLsB,AKKnB,AJLkB,ACAlB,ACAkB,OEKbA,EHLA7C,EGKL,CAAUkC,IHLV,GGKA,CAAkBjC,cAAlB,CAAiCuC,WAAjC,CAA6C,KAAKI,KAAL,CAAWE,sBAAX,CAAkCJ,IAAlC,CAAuC,KAAKE,KAA5C,CAA7C,EALuB,CAMvB;AHLD;AFAG,AKMF,AJNA,AEAA,ICAiBhB,GCMZgB,ELNEzD,ACAFY,AEAAA,GEML,CAAWR,ELNT,ACAF,AEAA,GHAiBL,ACAHa,AEAAA,MFAd,AEAA,CHAwB,CAACZ,GKMzB,CAA4BqD,ELNZ,GAAmBtD,MKMnC,CLN0C,AKMF,CLNGC,IKME0D,ELN7B,EKMwB,CLNY,AKMFV,SAAV,CAAoBY,SAApB,CAA8BL,IAA9B,CAAmC,KAAKG,IAAL,CAAUV,SAA7C,CAAxC;ALNsD/C,AKQvD,ADPD,MJDwDA,GAAG,EAAE,CAAP,IIC1CyC,QAAZ,EAAsB,MLAVzD,aAAa;AACvB,ACF8DiB,ACC9D,AEAA,ACAoB,MJD0CA,GAAG,ACC5DW,AEAAA,CJCD,CCF+D,KCCnE,AEAA,CJCW5B,WAAP,KAAuB,UAA3B,EAAuC;AACrC,ACHkD,AGGrD,KHHG,SDGM,IAAIC,KAAJ,CAAU,MGFV,wBHEA,CAAN;AACD,ACHC,ACCF,ACAA,AEAA,SJDOiB,ACCFW,AGAA6B,EFAArB,CEAL,GAAWL,EJDT,AECF,GFDmBlB,AECLkB,GDAd,AGAmB,CAAC2B,EHAE,CDDI,CAACzC,AECL,CAACe,CDAGnC,MDDR,CICP,CAAuB2D,CJDK3C,GECzB,CAAuB,GFDS,AICnC,CJDoCI,AIC/C,CFAc,CAAd,GDAsB,EAAtB,CDDkB,GAAwC,EAAxD,CAFiB,CAGjB;AAEA,ACDH,ACAC,WAAKmB,MAAL,CAAYH,SAAZ,CAAsBC,GAAtB,CAA0B,iBAA1B;AHEA,AGDA,AEDA,SAAKP,ELEA7B,AGDA4B,KEDL,CFCA,CAAYS,EHCZ,CAAelC,GGDf,CAAmB,GHCnB,CAAuB,CGDCmC,MAAxB,GHCuBlC,QAAQ,EAAI;AACjC,ACDA,AEAH,SFAQgB,GDCDhB,QAAQ,KAAKH,ACDjB,GAAwB,EGDlB,EHCsBF,IDC5B,EAA8B,gBCDN,EAAxB;ADEE,ACAH,AGFD,ACAA,IJGA,KIHK8D,EDAAR,GCAL,ELEU,AIFV,CCAa,EDAApB,CJEC/B,CKFGiD,ILEP,CAAU,CIFC,CAACjB,WCAT,CAAc,CDAd,CAAuB,GCAJ4B,EDAnB,CAAb,MCAa,CAAb,ELEU,CAAN;AACD,ACCH,AGHA,ACAA,SAAKC,EDAAT,KCAL,CDAA,ECAe,CDADrB,GCAKN,KDAG,CAACO,UFFN,GEEH,CAAuB,ACAtB,CAAgB,EDAjB,CAAd,ECAoC2B,KAAL,CAAWvB,MAA3B,CAAf;ALGC,ACCD,ACLA,AEEA,ACAA,OLFA,EKEK0B,EDAAX,EFFE,GEEP,CAAWlB,CFFCJ,AGEZ,GAAiB,IAAIkC,CHFd,AEEP,CFFqBjC,AEEAI,GAArB,CAAyB,OFFzB,SEEA,ACAiB,CAAkB,KAAK0B,SAAvB,CAAjB;ALGA,ACCA,ACLD,AEEC,WJEK9D,AIFAsD,MAAL,CAAYnB,EJEZ,CAAe9B,IAAf,CAAoBJ,CIFpB,CAAsBmC,GAAtB,CAA0B,KJE1B,YIFA;AJID,ACCD,AGJE,ACAA,SAAK4B,EDAAX,KAAL,CAAWhB,CCAX,CAAe6B,IDAf,CAAkB,KAAKZ,MAAvB,ACAA,CAAgC,KAAKS,OAAL,CAAaI,gBAAb,EAAhC;AJKF,AGJE,WAAKvC,MAAL,CAAYS,MAAZ,CAAmB,KAAKgB,KAAxB;AHKF,AGJC,ACDC,SAAKU,OAAL,CAAaK,aHHL,GGGR,CAA8B,KAAKP,KAAL,CAAWvB,MAAzC,EAToB,CAWpB;AJIF,ACRE,WAAKP,QAAL,GAAgBE,QAAQ,CAACC,IFMZ5B,KAAK,IENF,CAAuB,KAAvB,CAAhB;AFOA,ACEF,ACRE,WFMK,AENAyB,IFMIxB,CAAC,GAAG,AENb,CFMA,AENc4B,EFME5B,CAAC,GAAG,GENpB,CAAwB6B,CFMCpC,EENzB,CAA4B,MFMR,CAAeQ,MAAnC,EAA2CD,CAAC,EAA5C,CENA,CFMgD;AAC9C,ACEJ,ACRE,AGGA,SAAKwD,EHHAnC,CFMCtB,GAAG,CKHT,CHHA,AGGawB,CHHDO,EFME,IENd,CFMmBrC,AENA,KAAK+B,AEEhBwB,CCCR,CAA4Bc,ELGd,CAAe9D,CAAf,CAAZ,AIJa,CFFf,CFMiC,IKHjC,CAAwC,KAAKyD,SAAL,CAAeM,YAAf,CAA4BC,IAA5B,CAAiC,KAAKP,SAAtC,CAAxC;ALII,ACEN,ACRC,AEEC,ACCD,WDDMV,IJIItD,EIJT,CAAYwD,MJIR,CAAe/C,IIJnB,EJII,CAAsBF,AIJAgD,CJItB,EAAyB,CAAzB,CIJJ;AJKI,ACEN,AGNC;AJKI;AACF,qCERcjB,QAAQ;AAAA,8BGIf,ODDOU,cAAc;AJM7B,AILA,ACCA,WDDKK,ACCAS,CLIC,IAAI5D,AILV,CAAW6C,GCCX,CLIM,CAAU,AILhB,CAAiBF,ACCAZ,IDDjB,GAAwBe,CCCC,CAACd,UDDU,GAAG,ACCtB,CDDO,ACCgB,GDDG,ECC1B,CAAjB,CLIM,AILN,CJKA;AACD,AETG,AEIH,ACCC,WHLOH,AGKF+B,QHLH,CAAcvB,AGKhB,CAAeJ,SAAf,CAAyBC,GAAzB,CAA6B,CHL3B,CAA+B,MDQZ1B,EIHrB,GHLE,CDQyB,CCRmB,UAAA8B,CAAC,EAAI;ADSnD,ACRIA,AGKJ,QHLIA,CAAC,CAACC,CDQDtB,AIHAwC,GAAL,CAAStB,IJGT,EIHA,CJGgBhB,AIHA,EHLZ,EDQgB,CAACC,AIHAwC,KJGL,CAAW,GIH3B,EJGgC9C,MAAL,CAAYC,GAAZ,GAAkB,CAAC,KAAKD,MAAL,CAAYE,GAAZ,GAAkB,KAAKF,MAAL,CAAYC,GAA/B,KAAuCM,QAAQ,CAACb,IAAI,CAACc,OAAN,EAAe,EAAf,CAAR,GAA6Bd,IAAI,CAACe,SAAzE,CAA7B,CAAhB;AACA,AIHD,WJGML,gBAAL,CAAsBM,SAAtB,CAAgC,KAAKP,QAArC;AACD,ACTK,YAAMuB,MAAM,GAAGF,CAAC,CAACG,OFSbjC,AETW,GAAY,AEGpBA,GJMG,EETqB,CAACqB,AEGnB,QFHc,CAAca,qBAAd,GAAsCC,IAAjE;AFUJ,AINA,UJMI,CINCQ,IJMIrD,CINT,CAAW+C,KAAX,CAAiBF,CJMb,GAAiB,AINrB,CJMA,EAAwB,AINAnC,IAAI,CAACc,OAAL,GAAed,IAAI,CAACsC,YAAL,GAAoB,CAAnC,GAAuC,IAA/D;AJM0B,AETtB,AEIL,YFJWF,SAAS,GAAG,SAAZA,SAAY,CAAAN,CAAC,EAAI;AFSQ,AER7B,cAAIhB,OAAO,GAAGgB,CAAC,CAACG,OAAF,GAAYD,MAAZ,GAAqBJ,MAAM,CAACM,qBAAP,GAA+BC,IAAlE;AACA,cAAIpB,SAAS,GAAGa,MAAM,CAACN,WAAP,GAAqB,KAAI,CAACD,QAAL,CAAcC,WAAnD;AFQN,UAAMrB,cAAc,GAAG,KAAKX,SAAL,CAAeY,KAAf,CAAqB,CAArB,CAAvB;AACAD,AERM,MFQNA,QERUa,MFQI,CAACrB,AERE,GAAG,CAAd,EAAiB,CFQvB,CAAuB,UAAAU,UAAU,EAAI;AACnCA,AERMW,QFQNX,IERMW,MFQI,CAACd,AERE,GAAG,CFQN,AERJ,CFQN;AACD,AERM,OFMP;AAGD;AERO,cAAIc,OAAO,GAAGC,SAAd,EAAyB;AACvBD,YAAAA,OAAO,GAAGC,SAAV;AACD;;AACD,UAAA,KAAI,CAACM,QAAL,CAAcgB,KAAd,CAAoBF,IAApB,GAA2BrB,OAAO,GAAG,IAArC;AACA,cAAMwB,YAAY,GAAG,KAAI,CAACjB,QAAL,CAAcC,WAAnC;AACA,cAAMtB,IAAI,GAAG;AAAEc,YAAAA,OAAO,EAAPA,OAAF;AAAWwB,YAAAA,YAAY,EAAZA,YAAX;AAAyBvB,YAAAA,SAAS,EAATA;AAAzB,WAAb;;AACA,UAAA,KAAI,CAACK,cAAL,CAAoBJ,SAApB,CAA8BhB,IAA9B;AACD,SAbD;;AAeA,iBAASuC,OAAT,GAAmB;AACjBhB,UAAAA,QAAQ,CAACiB,mBAAT,CAA6B,SAA7B,EAAwCD,OAAxC;AACAhB,UAAAA,QAAQ,CAACiB,mBAAT,CAA6B,WAA7B,EAA0CJ,SAA1C;AACD;;AACDb,QAAAA,QAAQ,CAACM,gBAAT,CAA0B,WAA1B,EAAuCO,SAAvC;AACAb,QAAAA,QAAQ,CAACM,gBAAT,CAA0B,SAA1B,EAAqCU,OAArC;AACD,OAxBD;AAyBAhB,MAAAA,QAAQ,CAACM,gBAAT,CAA0B,WAA1B,EAAuC;AAAA,eAAM,KAAN;AAAA,OAAvC;AACD,MACD;;;;iCACWf,SAAS;AACpB,WAAKO,QAAL,CAAcgB,KAAd,CAAoBF,IAApB,GAA2BrB,OAAO,GAAG,IAArC;AACD","file":"adslider-native.782c2f27.js","sourceRoot":"../src","sourcesContent":["export default class EventObserver {\n  constructor() {\n    this.observers = [];\n  }\n\n  addObserver(newObserver) {\n    if (typeof newObserver !== 'function') {\n      throw new Error('Observer must be a function!');\n    }\n    this.observers.forEach(observer => {\n      if (observer === newObserver) {\n        throw new Error('Observer already in the list!');\n      }\n    });\n    this.observers.push(newObserver);\n\n  }\n\n  removeObserver(obs) {\n    for (let i = 0; i < this.observers.length; i++) {\n      if (obs === this.observers[i]) {\n        this.observers.splice(i, 1);\n        return;\n      }\n    }\n    throw new Error('No such observer in the list!');\n  }\n\n  broadcast(data) {\n    if (this.observers < 1) { return; }\n    const observersClone = this.observers.slice(0);\n    observersClone.forEach(subscriber => {\n      subscriber(data);\n    });\n  }\n}","import EventObserver from '../eventObserver/eventObserver';\r\n\r\nexport default class Model {\r\n  constructor(options) {\r\n      this.limits = (options.limits) ? options.limits : { min: 0, max: 100 };\r\n      this.defValue = (options.defValue) ? options.defValue : 50;\r\n      // this.showValueNote = (options.showValueNote) ? options.showValueNote : true;\r\n\r\n      // Event to update value on handler when defvalue in Model is changed\r\n      this.eventUpdateValue = new EventObserver();\r\n\r\n    }\r\n    // setValue(value) {\r\n    //   this.defValue = value;\r\n    //   this.eventUpdateValue.broadcast(this.defValue);\r\n    // }\r\n\r\n  // setLimits(limits) {\r\n  //   if (typeof values !== 'object') {\r\n  //     throw new Error('It must be object');\r\n  //   } else if (limits.min >= limits.max) {\r\n  //     throw new Error('Min can not be more than Max');\r\n  //   }\r\n  //   this.limits = { min: limits.min, max: limits.max };\r\n  // }\r\n  getValueFromHandlerPos(data) {\r\n    this.defValue = Math.round(this.limits.min + (this.limits.max - this.limits.min) * (parseInt(data.newLeft, 10) / data.rightEdge));\r\n    this.eventUpdateValue.broadcast(this.defValue);\r\n  }\r\n\r\n\r\n\r\n}","import EventObserver from '../../eventObserver/eventObserver';\r\n\r\nexport default class HandlerView {\r\n  constructor(parent) {\r\n    this.parent = parent;\r\n    this._render();\r\n    this.eventMousemove = new EventObserver();\r\n  }\r\n  _getHandlerWidth() {\r\n    return this.$handler.offsetWidth;\r\n  }\r\n  _render() {\r\n    this.$handler = document.createElement('div');\r\n    this.$handler.classList.add('adslider__handler');\r\n    this.parent.append(this.$handler);\r\n  }\r\n  _setMovePosition($track) {\r\n      this.$handler.addEventListener('mousedown', e => {\r\n        e.preventDefault();\r\n        const shiftX = e.clientX - this.$handler.getBoundingClientRect().left;\r\n        const mouseMove = e => {\r\n          let newLeft = e.clientX - shiftX - $track.getBoundingClientRect().left;\r\n          let rightEdge = $track.offsetWidth - this.$handler.offsetWidth;\r\n          if (newLeft < 0) {\r\n            newLeft = 0;\r\n          }\r\n          if (newLeft > rightEdge) {\r\n            newLeft = rightEdge;\r\n          }\r\n          this.$handler.style.left = newLeft + 'px';\r\n          const handlerWidth = this.$handler.offsetWidth;\r\n          const data = { newLeft, handlerWidth, rightEdge };\r\n          this.eventMousemove.broadcast(data);\r\n        };\r\n\r\n        function mouseUp() {\r\n          document.removeEventListener('mouseup', mouseUp);\r\n          document.removeEventListener('mousemove', mouseMove);\r\n        }\r\n        document.addEventListener('mousemove', mouseMove);\r\n        document.addEventListener('mouseup', mouseUp);\r\n      });\r\n      document.addEventListener('dragstart', () => false);\r\n    }\r\n    // method to set position of handler due to value\r\n  _setPosition(newLeft) {\r\n    this.$handler.style.left = newLeft + 'px';\r\n  }\r\n}","export default class TrackView {\n  constructor(parent) {\n    this.parent = parent;\n    this._render();\n  }\n  _render() {\n    this.$track = document.createElement('div');\n    this.$track.classList.add('adslider__track');\n    this.parent.append(this.$track);\n  }\n}","import EventObserver from '../../eventObserver/eventObserver';\r\n\r\nexport default class ValueNoteView {\r\n  constructor(parent) {\r\n    this.parent = parent;\r\n    this._render();\r\n\r\n  }\r\n  _render() {\r\n    this.$note = document.createElement('div');\r\n    this.$value = document.createElement('p');\r\n    this.$note.classList.add('adslider__note');\r\n    this.$value.classList.add('adslider__value');\r\n    this.$note.append(this.$value);\r\n    this.parent.append(this.$note);\r\n  }\r\n  _setValue(value) {\r\n    this.$value.textContent = value;\r\n  }\r\n  _alignRelHandler(handlerWidth) {\r\n    this.$note.style.left = handlerWidth / 2 + 'px';\r\n  }\r\n  _setPosition(data) {\r\n    this.$note.style.left = data.newLeft + data.handlerWidth / 2 + 'px';\r\n  }\r\n}","import HandlerView from './handlerView/handlerView';\nimport TrackView from './trackView/trackView';\nimport valueNoteView from './valueNoteView/valueNoteView';\n\nexport default class View {\n  constructor(selector) {\n    this.$el = document.querySelector(selector);\n    this._render();\n\n    this.track = new TrackView(this.$adslider);\n    this.handler = new HandlerView(this.track.$track);\n    this.valueNote = new valueNoteView(this.$adslider);\n\n    this.valueNote._alignRelHandler(this.handler._getHandlerWidth());\n    this.handler._setMovePosition(this.track.$track);\n\n    // When position of handler is changing - valueNote is changing position too\n    this.handler.eventMousemove.addObserver(this.valueNote._setPosition.bind(this.valueNote));\n  }\n\n  _render() {\n    this.$adslider = document.createElement('div');\n    this.$adslider.classList.add('adslider');\n    this.$el.append(this.$adslider);\n  }\n}","import EventObserver from '../eventObserver/eventObserver';\n\nexport default class Presenter {\n  constructor(model, view) {\n    this.model = model;\n    this.view = view;\n\n    // When position of handler is changing - defValue in Model is updating\n    this.view.handler.eventMousemove.addObserver(this.model.getValueFromHandlerPos.bind(this.model));\n    // When defValue in Model is changing - value in valueNote is updating\n    this.model.eventUpdateValue.addObserver(this.view.valueNote._setValue.bind(this.view.valueNote));\n\n  }\n\n}","import Model from './model/model';\nimport View from './view/view';\nimport Presenter from './presenter/presenter';\n\nexport default function createAdslider(selector, userOptions) {\n  const view = new View(selector);\n  const model = new Model(userOptions);\n  const presenter = new Presenter(model, view);\n}","import createAdslider from './createAdslider';\n\nwindow.adslider = createAdslider;"]}